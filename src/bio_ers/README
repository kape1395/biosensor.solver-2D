                      Biosensor Simulation Erlang Server
                                    bio_ers

Introduction
============
This is an Erlang application supposed to manage execution of multiple
simulations. The name `bio_ers' stands for "Biosensor (bio) simulation
Erlang (er) Server (s)". The server should support:
  * Queue simulation jobs and execute them. The queue should allow to
    manage concurency and therefore increase speed of simulations.
  * Allow the simulations to be paused and resumed in a convenient way,
    support simulation management in cases of machine restarts.
  * Provide convenient way to express parameter variation problems.
  * Help to manage calculation on multiple machines. Migration of
    running simulations should be supported also.
  * Maybe to help submitting jobs to a grid.


Design decisions
================
This section states main design decisions, made when developing bio_ers.
The list is to not forget and follow them. Updates to the principles are
of coutse allowed, just changes must be documented here including
argumentation for the changes. As for today the decisions are the following:
  * Implement process pool (simulation job queue). No maintained embedable
    implementation was found.
    TODO: Add known references here.
  * Use EI (Erlang Interface) to implement biosensor solver port [ei1, ei2].
    Maybe its better to not invent own protocol. Note that EI replaces
    mostly deprecated erl_interface [ei3]. The biosensor solver port
    implementation is in ../bio_ers_solver_port/.
  ? Transformation of a model to a atructure of primitive solver components
    should be done in erlang. I am expecting to have cleaner code in this way.
    Another aspect is that C++ side should be rewritten anyway to employ
    IoC pattern instead of heavy constructors where appropriate.


Dependencies
============
Used modules:
  * xmerl_scan
  * eunit


References
==========
[ei1] http://www.erlang.org/doc/apps/erl_interface/users_guide.html
[ei2] http://www.erlang.org/doc/man/ei.html
[ei3] http://www.erlang.org/faq/how_do_i.html
[?ei4] http://kazmier.net/computer/port-howto/
[?dev1] http://www.erlang.se/doc/programming_rules.shtml
[?dev2] http://wwwhome.cs.utwente.nl/~tcm/index.html
[?dev3] http://www.erlang.org/doc/apps/tools/erlang_mode_chapter.html
[?tst1] http://erlymock-site.sourceforge.net/
[?tst2] http://stackoverflow.com/questions/1202539/how-do-i-do-dependency-injection-and-mocks-in-erlang


Appendix A.
===========
Some useful commands for a developer:
    erl -pa ebin -s bio_ers_app startup
        application:which_applications().   # List running apps.
        eunit:test(bio_ers).                # Run unit tests.
        rr(xmerl).                          # Load record definitions.
        rp([list, {a}]).                    # Prints all the structure recursivelly
        i().                                # Lists processes.
        pman:start().                       # Process manager (GUI).
        appmon:start().                     # Application manager (GUI).
        init:stop().                        # Quit.

    make test_run   # For the change-compile-check loop...
        rp({os:cmd("make"), code:purge(bio_ers_model), code:load_file(bio_ers_model)}).
        rp(bio_ers_model:parse_file("test/bio_ers_model_tests-CNT-2D.xml")).

    make check      # Runs all the unit tests.


